(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39db48c4"],{"16e9":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"auth-container"},[a("div",{staticClass:"auth-box"},[a("rocket"),a("a-form-model",{ref:"refForm",staticClass:"right-form",staticStyle:{"justify-content":"flex-start","padding-top":"50px"},attrs:{model:e.formModel,rules:e.formRules},on:{submit:function(t){return t.preventDefault(),e.onRegister()}}},[a("div",{staticClass:"wrapper"},[a("h2",{staticClass:"title"},[e._v(" 账号注册 "),a("b",[e._v("使用邮箱注册")])]),a("div",{staticClass:"tip",staticStyle:{"margin-bottom":"30px"}},[e._v(" 已有账号？ "),a("router-link",{staticClass:"blu",attrs:{to:"/login"}},[e._v("立即登录")])],1),a("a-form-model-item",{staticClass:"control",attrs:{label:"邮箱",prop:"email"}},[a("a-input",{staticClass:"input",attrs:{size:"large","max-length":32,placeholder:"请输入邮箱","allow-clear":""},model:{value:e.formModel.email,callback:function(t){e.$set(e.formModel,"email",t)},expression:"formModel.email"}},[e.emailSuffix.length>0?a("a-select",{staticStyle:{width:"140px"},attrs:{slot:"addonAfter"},slot:"addonAfter",model:{value:e.formModel.emailAddon,callback:function(t){e.$set(e.formModel,"emailAddon",t)},expression:"formModel.emailAddon"}},e._l(e.emailSuffix,(function(t){return a("a-select-option",{key:t,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1):e._e()],1)],1),a("a-form-model-item",{staticClass:"control",attrs:{label:"密码",prop:"password"}},[a("a-input",{staticClass:"input",attrs:{type:"password",size:"large","max-length":32,placeholder:"请输入密码","allow-clear":""},model:{value:e.formModel.password,callback:function(t){e.$set(e.formModel,"password",t)},expression:"formModel.password"}})],1),a("a-form-model-item",{staticClass:"control",attrs:{label:"确认密码",prop:"password2"}},[a("a-input",{staticClass:"input",attrs:{type:"password",size:"large","max-length":32,placeholder:"请确认密码","allow-clear":""},model:{value:e.formModel.password2,callback:function(t){e.$set(e.formModel,"password2",t)},expression:"formModel.password2"}})],1),a("a-form-model-item",{staticClass:"control",attrs:{label:"邀请码",prop:"inviteCode"}},[a("a-input",{staticClass:"input",attrs:{type:"text",size:"large","max-length":32,placeholder:e.needInviteCode?"请输入邀请码（必填）":"请输入邀请码（选填）","allow-clear":""},model:{value:e.formModel.inviteCode,callback:function(t){e.$set(e.formModel,"inviteCode",t)},expression:"formModel.inviteCode"}})],1),e.showEmailCode?a("a-form-model-item",{staticClass:"control",attrs:{label:"验证码",prop:"emailCode"}},[a("a-input",{staticClass:"input",attrs:{type:"text",size:"large","max-length":16,placeholder:"请输入验证码","allow-clear":""},model:{value:e.formModel.emailCode,callback:function(t){e.$set(e.formModel,"emailCode",t)},expression:"formModel.emailCode"}},[a("a-button",{staticStyle:{width:"110px"},attrs:{slot:"suffix",type:"primary",loading:e.loading2,disabled:e.seconds>0},on:{click:e.onEmailSend},slot:"suffix"},[e._v(" "+e._s(e.seconds>0?"重新发送("+parseInt(e.seconds)+")":"发送")+" ")])],1)],1):e._e(),a("div",{staticClass:"agree"},[a("a-checkbox",{model:{value:e.formModel.agree,callback:function(t){e.$set(e.formModel,"agree",t)},expression:"formModel.agree"}}),e._v(" 我已阅读并同意 "),a("router-link",{staticClass:"blu",attrs:{to:"/agreement"}},[e._v("服务条款")])],1),a("a-button",{staticClass:"btn",attrs:{type:"primary",block:"",loading:e.loading,size:"large","html-type":"submit"}},[e._v("注册")])],1)])],1),a("a-modal",{attrs:{visible:e.visible,centered:"",footer:null}},[a("div",{attrs:{id:"recaptcha"}})])],1)},o=[],r=a("c7eb"),s=a("1da1"),n=a("5530"),l=(a("d81d"),a("d9e2"),a("caad"),a("2532"),a("14d9"),a("62d0")),c=a("f146"),d=(a("686c"),a("2f62")),u=a("5a0c"),f=a.n(u),m=a("83a7"),p=a.n(m),h={name:"Register",components:{Rocket:c["a"]},data:function(){return{loading:!1,loading2:!1,seconds:0,visible:!1,formModel:{agree:!1,email:"",emailAddon:"",password:"",password2:"",emailCode:"",inviteCode:"",captchaData:""}}},computed:Object(n["a"])(Object(n["a"])({},Object(d["b"])("auth",["globalConfig"])),{},{showEmailCode:function(){return this.globalConfig.is_email_verify},needInviteCode:function(){return this.globalConfig.is_invite_force},emailSuffix:function(){var e=(this.globalConfig.email_whitelist_suffix||[]).map((function(e){return"@"+e}));return e.length>0&&(this.formModel.emailAddon=e[0]),e},formRules:function(){var e=this,t=function(t,a,i){a===e.formModel.password?i():i(new Error("两次输入的密码不一致"))},a=function(t,a,i){e.formModel.email.includes("@")?i(new Error("邮箱格式错误")):i()},i={email:[{required:!0,message:"请输入邮箱",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:8,message:"密码至少为8个字符",trigger:"blur"}],password2:[{required:!0,message:"请确认密码",trigger:"blur"},{min:8,message:"密码至少为8个字符",trigger:"blur"},{validator:t,trigger:"blur"}],emailCode:[{required:!0,message:"请输入验证码",trigger:"blur"}]};return this.emailSuffix.length>0?i.email.push({validator:a,trigger:"blur"}):i.email.push({type:"email",message:"邮箱格式错误",trigger:"blur"}),this.needInviteCode&&(i.inviteCode=[{required:!0,message:"请输入邀请码",trigger:"blur"}]),i}}),mounted:function(){var e;this.formModel.inviteCode=null!==(e=this.$route.query.code)&&void 0!==e?e:"";var t=this.$ls.get("RegTimer");if(t){var a=60-(f()().valueOf()-t)/1e3;console.log("duration",a,f()().valueOf(),t),a<=60?this.countdownTimer(a):this.$ls.remove("RegTimer")}},methods:{loadGoogleCaptcha:function(){var e=this;this.visible=!0,this.$nextTick((function(){p()(["https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit"],"g"),window.onloadCallback=function(){console.log(e.globalConfig.recaptcha_site_key),e.wid=window.grecaptcha.render("recaptcha",{sitekey:e.globalConfig.recaptcha_site_key,callback:function(){e.visible=!1,e.formModel.captchaData=window.grecaptcha.getResponse(e.wid),e.onRegister(!0),window.grecaptcha.reset(e.wid)}})}}))},getEmailValue:function(){var e=this.formModel,t=e.email,a=e.emailAddon;return this.emailSuffix.length>0?t+a:t},countdownTimer:function(e){var t=this;this.seconds=e;var a=setInterval((function(){t.seconds--,t.seconds<=0&&(clearInterval(a),t.$ls.remove("RegTimer"))}),1e3)},onEmailSend:function(){var e=this;this.$refs.refForm.validateField("email",function(){var t=Object(s["a"])(Object(r["a"])().mark((function t(a){var i;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:return e.loading2=!0,t.prev=3,t.next=6,Object(l["f"])({email:e.getEmailValue()});case 6:i=t.sent,!0===i.data&&(e.$message.success("验证码发送成功，如未收到请检查垃圾邮件"),e.$ls.set("RegTimer",f()().valueOf()),e.countdownTimer(60)),t.next=12;break;case 10:t.prev=10,t.t0=t["catch"](3);case 12:e.loading2=!1;case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}())},onRegister:function(e){var t=this;if(!this.globalConfig.is_recaptcha||e){var a=this.formModel,i=a.agree,o=a.password,n=a.inviteCode,c=a.emailCode,d=a.captchaData;if(!i)return this.$message.info("请先同意服务条款");this.$refs.refForm.validate(function(){var e=Object(s["a"])(Object(r["a"])().mark((function e(a){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=14;break}return t.loading=!0,e.prev=2,e.next=5,Object(l["h"])({email:t.getEmailValue(),password:o,invite_code:n,email_code:c,recaptcha_data:d});case 5:t.$message.success("注册成功，请登录"),t.$router.push("/login"),e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](2);case 11:t.loading=!1,e.next=15;break;case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}())}else this.loadGoogleCaptcha()}}},g=h,v=a("2877"),b=Object(v["a"])(g,i,o,!1,null,null,null);t["default"]=b.exports},"686c":function(e,t,a){},"83a7":function(e,t,a){var i,o,r;(function(a,s){o=[],i=s,r="function"===typeof i?i.apply(t,o):i,void 0===r||(e.exports=r)})(0,(function(){var e=function(){},t={},a={},i={};function o(e,t){e=e.push?e:[e];var o,r,s,n,l=[],c=e.length,d=c;o=function(e,a){a.length&&l.push(e),d--,d||t(l)};while(c--)r=e[c],s=a[r],s?o(r,s):(n=i[r]=i[r]||[],n.push(o))}function r(e,t){if(e){var o=i[e];if(a[e]=t,o)while(o.length)o[0](e,t),o.splice(0,1)}}function s(t,a){t.call&&(t={success:t}),a.length?(t.error||e)(a):(t.success||e)(t)}function n(t,a,i,o){var r,s,l=document,c=i.async,d=(i.numRetries||0)+1,u=i.before||e,f=t.replace(/[\?|#].*$/,""),m=t.replace(/^(css|img)!/,"");o=o||0,/(^css!|\.css$)/.test(f)?(s=l.createElement("link"),s.rel="stylesheet",s.href=m,r="hideFocus"in s,r&&s.relList&&(r=0,s.rel="preload",s.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(f)?(s=l.createElement("img"),s.src=m):(s=l.createElement("script"),s.src=t,s.async=void 0===c||c),s.onload=s.onerror=s.onbeforeload=function(e){var l=e.type[0];if(r)try{s.sheet.cssText.length||(l="e")}catch(c){18!=c.code&&(l="e")}if("e"==l){if(o+=1,o<d)return n(t,a,i,o)}else if("preload"==s.rel&&"style"==s.as)return s.rel="stylesheet";a(t,l,e.defaultPrevented)},!1!==u(t,s)&&l.head.appendChild(s)}function l(e,t,a){e=e.push?e:[e];var i,o,r=e.length,s=r,l=[];for(i=function(e,a,i){if("e"==a&&l.push(e),"b"==a){if(!i)return;l.push(e)}r--,r||t(l)},o=0;o<s;o++)n(e[o],i,a)}function c(e,a,i){var o,n;if(a&&a.trim&&(o=a),n=(o?i:a)||{},o){if(o in t)throw"LoadJS";t[o]=!0}function c(t,a){l(e,(function(e){s(n,e),t&&s({success:t,error:a},e),r(o,e)}),n)}if(n.returnPromise)return new Promise(c);c()}return c.ready=function(e,t){return o(e,(function(e){s(t,e)})),c},c.done=function(e){r(e,[])},c.reset=function(){t={},a={},i={}},c.isDefined=function(e){return e in t},c}))},f146:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"rocket-container left-img"},[a("div",{staticClass:"warp"},[a("div",{staticClass:"img",on:{click:function(t){return e.$router.push("/")}}},[e.rocketOptions.animationData?a("lottie",{staticClass:"in",attrs:{options:e.rocketOptions,height:640,width:640},on:{animCreated:e.handleAnimation}}):e._e()],1),a("div",{staticClass:"txt"},[a("h2",{staticClass:"tit"},[e._v(e._s(e.descTitles[0]||""))]),a("p",{staticClass:"desc"},[e._v(e._s(e.descTitles[1]||""))])])])])},o=[],r=a("8c2c"),s=a("bc3a"),n=a.n(s),l=a("54d7"),c={name:"Rocket",components:{Lottie:r["a"]},data:function(){return{anim:{},rocketOptions:{animationData:null}}},computed:{descTitles:function(){return this.$appDesc.split("\n")}},mounted:function(){var e=this;setTimeout((function(){n.a.get(l["h"]+"/83245-rocket-launch.json").then((function(t){e.rocketOptions.animationData=t.data}))}),0)},methods:{handleAnimation:function(e){this.anim=e,this.anim.setSpeed(.6)}}},d=c,u=a("2877"),f=Object(u["a"])(d,i,o,!1,null,null,null);t["a"]=f.exports}}]);